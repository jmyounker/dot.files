#!/usr/bin/python

import argparse
import os
import shutil

dirs = [
  'bin',
]

files = [
  ('dot.gitconfig', '.gitconfig'),
  ('dot.gitignore_global', '.gitignore_global'),
  ('dot.profile', '.profile'),
  ('bin/get_prompt', 'bin/get_prompt'),
]

home = '/Users/jeff'

def install():
  for dir in dirs:
    dir_full_path = os.path.join(home, dir)
    if not os.path.exists(dir_full_path):
      os.mkdir(dir_full_path)

  for (source, deployed) in files:
    deployed_full_path = os.path.join(home, deployed)
    if os.path.exists(source):
      shutil.copy2(source, deployed_full_path)
  
def recover():
  for (source, deployed) in files:
    deployed_full_path = os.path.join(home, deployed)
    if os.path.exists(deployed_full_path):
      shutil.copy2(deployed_full_path, source)


parser = argparse.ArgumentParser(description='install dot files')
parser.add_argument('--install', dest='action', action='store_const',
    const=install, help='install dot files')
parser.add_argument('--recover', dest='action', action='store_const',
    const=recover, help='recover dot files from environment')

args = parser.parse_args()
args.action()

